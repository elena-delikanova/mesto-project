(()=>{"use strict";var e={483:(e,t,n)=>{e.exports=n.p+"c15cb08ab8ecfaba54c6.jpg"}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="",n.b=document.baseURI||self.location.href,(()=>{function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var t=function(){function t(e){var n=e.headers,o=e.baseUrl;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._headers=n,this._baseUrl=o}var n,o;return n=t,(o=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkResponse)}},{key:"postCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"setLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&e(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(),o=document.querySelector("#photo-card").content,r=".popup__close-button",i=document.querySelector(".profile__add-button"),u=document.querySelector(".profile__edit-button"),a=document.querySelector(".photos__gallary"),c=document.querySelector(".profile__avatar-edit-button"),s=document.querySelector(".popup-edit-info").querySelector(".edit-form"),l=s.querySelector("#profile-name"),p=s.querySelector("#profile-caption"),f=document.querySelector(".loader");function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=function(){function e(t,n,o,r,i){var u=t.name,a=t.link,c=t.likes,s=t._id,l=t.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=u,this._link=a,this._likes=c,this._id=s,this._ownerId=l._id,this._userId=n,this._deletingButtonClickHandler=o,this._photoLikeButtonClickHandler=r,this._imageClickHandler=i}var t,n;return t=e,(n=[{key:"_getElement",value:function(){return o.querySelector(".photos__photo-card").cloneNode(!0)}},{key:"_setEventListeners",value:function(){this._image.addEventListener("click",this._imageClickHandler),this._photoDeletingButton.addEventListener("click",this._deletingButtonClickHandler),this._photoLikeButton.addEventListener("click",this._photoLikeButtonClickHandler.bind(this))}},{key:"_setLikeButtonStatus",value:function(){var e=this;this._userId&&this._likes.some((function(t){return t._id===e._userId}))&&this._photoLikeButton.classList.add(this._activeLikeClass)}},{key:"generate",value:function(){return this._element=this._getElement(),this._image=this._element.querySelector(".photos__photo"),this._caption=this._element.querySelector(".photos__photo-caption"),this._photoDeletingButton=this._element.querySelector(".photos__delete-button"),this._photoLikeButton=this._element.querySelector(".photos__like-button"),this._photoLikeCounter=this._element.querySelector(".photos__like-counter"),this._activeLikeClass="photos__like-button_active",this._isCurrentUserCard=this._ownerId===this._userId,this._caption.textContent=this._name,this._image._id=this._id,this._image.src=this._link,this._image.alt="Фотография ".concat(this._name),this._photoLikeCounter.textContent=this._likes.length,this._setEventListeners(),this._setLikeButtonStatus(),this._isCurrentUserCard||this._photoDeletingButton.remove(),this._element}}])&&h(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var y=function(){function e(t,n,o){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=n,this._action=o}var t,n;return t=e,(n=[{key:"setItem",value:function(e){this._container[this._action](e)}},{key:"renderItems",value:function(e){var t=this;this._renderedItems=e,this._renderedItems.forEach((function(e){t._renderer(e)}))}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){function e(t){var n=this,o=t.popupSelector,r=t.closeButtonSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"_escapeHandler",(function(e){"Escape"===e.key&&n.close()})),v(this,"_clickHandler",(function(e){e.target.classList.contains("popup")&&n.close()})),v(this,"_closeButtonClickHandler",(function(){n.close()})),this._popupSelector=o,this._popupElement=document.querySelector(this._popupSelector),this._closeButtonSelector=r,this._closeButton=this._popupElement.querySelector(this._closeButtonSelector)}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){this._closeButton.addEventListener("click",this._closeButtonClickHandler),this._popupElement.addEventListener("click",this._clickHandler),document.addEventListener("keydown",this._escapeHandler)}},{key:"_removeEventListeners",value:function(){this._closeButton.removeEventListener("click",this._closeButtonClickHandler),this._popupElement.removeEventListener("click",this._clickHandler),document.removeEventListener("keydown",this._escapeHandler)}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),this._setEventListeners()}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),this._removeEventListeners()}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=g(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},E.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function L(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(o);if(r){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._photoElementInPopup=t._popupElement.querySelector(".popup-photo__photo"),t._photoCaptionElement=t._popupElement.querySelector(".popup-photo__photo-caption"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._photoElementInPopup.src=t,this._photoElementInPopup.alt="Фотография ".concat(n),this._photoCaptionElement.textContent=n,this._photoCaptionElement.style.width=this._photoElementInPopup.clientWidth+"px",E(C(u.prototype),"open",this).call(this)}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(b);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function j(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=I(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},P.apply(this,arguments)}function I(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function q(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(o);if(r){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return q(this,e)});function u(e){var t,n,o,r,a=e.popupSelector,c=e.closeButtonSelector,s=e.handleFormSubmit,l=e.disableSubmitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=function(e){e.preventDefault(),t._handleFormSubmit(t._getInputValues())},(o="_submitFormHandler")in(n=T(t=i.call(this,{popupSelector:a,closeButtonSelector:c})))?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,t._form=t._popupElement.querySelector(".form"),t._submitButtonSelector=".form__save-button",t._inactiveButtonClass="form__save-button_inactive",t._submitButton=t._form.querySelector(t._submitButtonSelector),t._submitButtonInitianText=t._submitButton.textContent,t._handleFormSubmit=s,t._disableSubmitButton=l,t}return t=u,(n=[{key:"_setEventListeners",value:function(){P(x(u.prototype),"_setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitFormHandler)}},{key:"_removeEventListeners",value:function(){P(x(u.prototype),"_removeEventListeners",this).call(this),this._form.removeEventListener("submit",this._submitFormHandler)}},{key:"_getInputValues",value:function(){var e=this;return this._inputList=this._form.querySelectorAll(".form__input"),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"resetForm",value:function(){this._form.reset()}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._submitButtonInitianText}},{key:"open",value:function(){this._disableSubmitButton(this._submitButton),P(x(u.prototype),"open",this).call(this)}}])&&j(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(b);function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=D(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},F.apply(this,arguments)}function D(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}function N(e,t){if(t&&("object"===H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return M(e)}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},J(e)}var z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(u,e);var t,n,o,r,i=(o=u,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=J(o);if(r){var n=J(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return N(this,e)});function u(e){var t,n,o,r,a=e.popupSelector,c=e.handleFormSubmit,s=e.closeButtonSelector;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=function(e){e.preventDefault(),t._handleFormSubmit()},(o="_submitFormHandler")in(n=M(t=i.call(this,{popupSelector:a,closeButtonSelector:s})))?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,t._form=t._popupElement.querySelector(".form"),t._handleFormSubmit=c,t}return t=u,(n=[{key:"_setEventListeners",value:function(){F(J(u.prototype),"_setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitFormHandler)}},{key:"_removeEventListeners",value:function(){F(J(u.prototype),"_removeEventListeners",this).call(this),this._form.removeEventListener("submit",this._submitFormHandler)}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(b);function W(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var $=function(){function e(t){var n=t.selectorName,o=t.selectorCaption,r=t.selectorAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileNameElement=document.querySelector(n),this._profileCaptionElement=document.querySelector(o),this._userAvatar=document.querySelector(r)}var t,o;return t=e,(o=[{key:"setInfo",value:function(e){var t=e.name,n=e.about,o=e._id;this._profileNameElement.textContent=t,this._profileCaptionElement.textContent=n,this.userId=o}},{key:"setAvatar",value:function(e){var t=this;this._userAvatar.src=e,this._userAvatar.onerror=function(){t._userAvatar.src=new URL(n(483),n.b)}}},{key:"getCurrentInfo",value:function(){return{name:this._profileNameElement.textContent,about:this._profileCaptionElement.textContent}}}])&&W(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var K,Q=function(){function e(t){var n=t.formSelector,o=t.fieldsetSelector,r=t.inputSelector,i=t.submitButtonSelector,u=t.inactiveButtonClass,a=t.inputErrorClass,c=t.activeInputErrorClass;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=n,this._fieldsetSelector=o,this._inputSelector=r,this._submitButtonSelector=i,this._inactiveButtonClass=u,this._inputErrorClass=a,this._activeInputErrorClass=c,this._formList=Array.from(document.querySelectorAll(this._formSelector))}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(this._inputSelector)),o=e.querySelector(this._submitButtonSelector);this._toggleButtonState({inputList:n,buttonElement:o}),n.forEach((function(r){r.addEventListener("input",(function(){t._checkInputValidity({inputElement:r,formElement:e}),t._toggleButtonState({inputList:n,buttonElement:o})}))}))}},{key:"_toggleButtonState",value:function(e){var t=e.inputList,n=e.buttonElement;this._hasInvalidInput(t)?this.disableSubmitButton(n):this.enableSubmitButton(n)}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){var t=e.inputElement,n=e.formElement;t.validity.valid?this._hideInputError({inputElement:t,formElement:n}):(t.validity.patternMismatch?t.setCustomValidity(t.dataset.errorMessage):t.setCustomValidity(""),this._showInputError({inputElement:t,formElement:n}))}},{key:"_showInputError",value:function(e){var t=e.formElement,n=e.inputElement,o=t.querySelector(".".concat(n.id,"-error"));n.classList.add(this._inputErrorClass),o.textContent=n.validationMessage,o.classList.add(this._activeInputErrorClass)}},{key:"_hideInputError",value:function(e){var t=e.formElement,n=e.inputElement,o=t.querySelector(".".concat(n.id,"-error"));n.classList.remove(this._inputErrorClass),o.classList.remove(this._activeInputErrorClass),o.textContent=""}},{key:"disableSubmitButton",value:function(e){e.classList.add(this._inactiveButtonClass),e.disabled=!0}},{key:"enableSubmitButton",value:function(e){e.classList.remove(this._inactiveButtonClass),e.disabled=!1}},{key:"enableValidation",value:function(){var e=this;this._formList.forEach((function(t){t.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(t.querySelectorAll(e._fieldsetSelector)).forEach((function(t){e._setEventListeners(t)}))}))}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function X(e){var t=e.objectToSet,n=e.event,o=e.handler;t.addEventListener(n,o)}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Z=new t({baseUrl:"https://nomoreparties.co/v1/plus-cohort-14",headers:{authorization:"8fa0e13a-d0e0-42e8-8028-4ced854c725e","Content-Type":"application/json"}}),ee=new Q({formSelector:".form",fieldsetSelector:".form__set",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive",inputErrorClass:"form__input_type_error",activeInputErrorClass:"form__input-error_active"}),te=new b({popupSelector:".popup-error",closeButtonSelector:r}),ne=function(e){console.log(e),te.open()},oe=new O({popupSelector:".popup-photo",closeButtonSelector:r}),re=new A({popupSelector:".popup-add-photo",closeButtonSelector:r,handleFormSubmit:function(e){var t=e["photo-capture"],n=e["photo-link"];re.renderLoading(!0),Z.postCard({name:t,link:n}).then((function(e){se.renderItems([e]),re.resetForm(),re.close()})).catch(ne).finally((function(){re.renderLoading(!1)}))},disableSubmitButton:ee.disableSubmitButton}),ie=new $({selectorName:".profile__name",selectorCaption:".profile__caption",selectorAvatar:".profile__avatar"}),ue=new A({popupSelector:".popup-edit-info",closeButtonSelector:r,handleFormSubmit:function(e){var t=e["profile-name"],n=e["profile-caption"];Z.updateUserInfo({name:t,about:n}).then((function(e){ie.setInfo(e),ue.close()})).catch(ne).finally((function(){ue.renderLoading(!1)}))},disableSubmitButton:ee.disableSubmitButton}),ae=new A({popupSelector:".popup-update-avatar",closeButtonSelector:r,handleFormSubmit:function(e){var t=e["update-avatar-link"];Z.updateUserAvatar(t).then((function(e){ie.setAvatar(e.avatar),ae.close()})).catch(ne).finally((function(){ae.renderLoading(!1)}))},disableSubmitButton:ee.disableSubmitButton}),ce=new z({popupSelector:".popup-confirmation",closeButtonSelector:r,handleFormSubmit:function(){var e=K.querySelector(".photos__photo")._id;Z.deleteCard(e).then((function(){K.remove(),K=void 0,ce.close()})).catch(ne)}}),se=new y({renderer:function(e){var t=new d(e,ie.userId,le,pe,(function(){oe.open(e)})).generate();se.setItem(t)}},a,"prepend"),le=function(e){K=e.target.closest(".photos__photo-card"),ce.open()},pe=function(){var e=this;this._photoLikeButton.classList.contains(this._activeLikeClass)?Z.deleteLike(this._id).then((function(t){e._photoLikeCounter.textContent=t.likes.length,e._photoLikeButton.classList.remove(e._activeLikeClass)})).catch((function(e){console.log(e)})):Z.setLike(this._id).then((function(t){e._photoLikeCounter.textContent=t.likes.length,e._photoLikeButton.classList.add(e._activeLikeClass)})).catch((function(e){console.log(e)}))};Promise.all([Z.getUserInfo(),Z.getInitialCards()]).then((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(o=n.next()).done)&&(i.push(o.value),!t||i.length!==t);u=!0);}catch(e){a=!0,r=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw r}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=o[0],i=o[1];ie.setInfo(r),ie.setAvatar(r.avatar),se.renderItems(i.reverse())})).catch((function(e){console.log(e)})).finally((function(){f.classList.add("loader-invisible")})),X({objectToSet:i,handler:function(){re.open()},event:"click"}),X({objectToSet:u,handler:function(){var e=ie.getCurrentInfo(),t=e.name,n=e.about;l.value=t,p.value=n,ue.open()},event:"click"}),X({objectToSet:c,handler:function(){ae.open()},event:"click"}),ee.enableValidation()})()})();