(()=>{"use strict";var t={483:(t,e,o)=>{t.exports=o.p+"c15cb08ab8ecfaba54c6.jpg"},100:(t,e,o)=>{t.exports=o.p+"e25ed97c4c82eea0f732.jpg"},53:(t,e,o)=>{t.exports=o.p+"604ece1024502be03108.jpg"},510:(t,e,o)=>{t.exports=o.p+"c9d40e57f21cdd7e2e9e.jpg"},216:(t,e,o)=>{t.exports=o.p+"15f15923ae021e2c405b.jpg"},938:(t,e,o)=>{t.exports=o.p+"57d2d00be48246c13d4b.jpg"},841:(t,e,o)=>{t.exports=o.p+"ce3a80ec879161dfaca2.jpg"}},e={};function o(n){var r=e[n];if(void 0!==r)return r.exports;var c=e[n]={exports:{}};return t[n](c,c.exports,o),c.exports}o.m=t,o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),o.p="",o.b=document.baseURI||self.location.href,(()=>{new URL(o(100),o.b),new URL(o(53),o.b),new URL(o(510),o.b),new URL(o(216),o.b),new URL(o(938),o.b),new URL(o(841),o.b);var t="https://nomoreparties.co/v1/plus-cohort-14",e=function(t){if("Escape"===t.key){var e=document.querySelector(".popup_opened");e&&a(e)}},n=function(t){t.target.classList.contains("popup")&&a(t.target)},r=function(t){a(t.target.closest(".popup"))};function c(t){t.classList.add("popup_opened"),t.addEventListener("click",n),document.addEventListener("keydown",e)}function a(t){t.classList.remove("popup_opened"),t.removeEventListener("click",n),document.removeEventListener("keydown",e)}var i={authorization:"8fa0e13a-d0e0-42e8-8028-4ced854c725e","Content-Type":"application/json"},u=document.querySelector(".popup-photo"),s=document.querySelector("#photo-card").content,l=u.querySelector(".popup-photo__photo"),d=u.querySelector(".popup-photo__photo-caption");function p(e,o,n){var r=e.name,a=e.link,p=e.likes,f=e._id,m=e.owner,v=s.querySelector(".photos__photo-card").cloneNode(!0),h=v.querySelector(".photos__photo"),_=v.querySelector(".photos__photo-caption"),b=v.querySelector(".photos__delete-button"),y=v.querySelector(".photos__like-button"),S=v.querySelector(".photos__like-counter"),q="photos__like-button_active",E=m._id===o;return h._id=f,_.textContent=r,h.src=a,h.alt="Фотография ".concat(r),h.addEventListener("click",(function(){l.src=a,l.alt="Фотография ".concat(r),d.textContent=r,d.style.width=l.clientWidth+"px",c(u)})),E?b.addEventListener("click",n):b.remove(),S.textContent=p.length,o&&p.some((function(t){return t._id===o}))&&y.classList.add(q),y.addEventListener("click",(function(){var e;y.classList.contains(q)?(e=f,fetch("".concat(t,"/cards/likes/").concat(e),{method:"DELETE",headers:i}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))).then((function(t){S.textContent=t.likes.length,y.classList.remove(q)})).catch((function(t){console.log(t)})):function(e){return console.log(e),fetch("".concat(t,"/cards/likes/").concat(e),{method:"PUT",headers:i}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}(f).then((function(t){S.textContent=t.likes.length,y.classList.add(q)})).catch((function(t){console.log(t)}))})),v}function f(t){var e=t.inputList,o=t.buttonElement,n=t.validationParams;!function(t){return t.some((function(t){return!t.validity.valid}))}(e)?(o.classList.remove(n.inactiveButtonClass),o.disabled=!1):m({buttonElement:o,inactiveButtonClass:n.inactiveButtonClass})}function m(t){var e=t.buttonElement,o=t.inactiveButtonClass;e.classList.add(o),e.disabled=!0}function v(t){var e=t.element,o=t.buttonSelector,n=t.inactiveButtonClass;m({buttonElement:e.querySelector(o),inactiveButtonClass:n})}function h(t){t.objectToSet.addEventListener(t.event,t.handler)}var _,b,y,S=document.querySelector(".add-photo-form"),q=document.querySelector(".popup-add-photo"),E=document.querySelector(".profile__name"),L=document.querySelector(".profile__caption"),C=document.querySelector(".profile__add-button"),g=document.querySelectorAll(".popup__close-button"),j=document.querySelector(".profile__edit-button"),x=document.querySelector(".popup-edit-info"),k=document.querySelector(".photos__gallary"),T=document.querySelector(".popup-update-avatar"),P=document.querySelector(".profile__avatar-edit-button"),B=document.querySelector(".popup-confirmation"),w=B.querySelector(".confirmation-form"),A=S.querySelector("#photo-capture"),U=S.querySelector("#photo-link"),R=x.querySelector(".edit-form"),D=R.querySelector("#profile-name"),O=R.querySelector("#profile-caption"),I=T.querySelector(".update-avatar-form"),N=I.querySelector("#update-avatar-link"),J=document.querySelector(".profile__avatar"),M=document.querySelector(".loader"),H=document.querySelector(".popup-error"),V=function(t){console.log(t),c(H)},z=function(t){b=t.target.closest(".photos__photo-card"),c(B)};function W(t){var e=t.card;t.container.prepend(e)}function F(t){var e=t.isLoading,o=t.button,n=t.initialButtonText;o.textContent=e?"Сохранение...":n}fetch("".concat(t,"/users/me"),{headers:i}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).then((function(t){E.textContent=t.name,L.textContent=t.about,J.src=t.avatar,J.onerror=function(){J.src=new URL(o(483),o.b)},_=t._id})).catch((function(t){console.log(t)})).finally((function(){M.classList.add("loader-invisible")})),fetch("".concat(t,"/cards"),{headers:i}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))})).then((function(t){t.forEach((function(t){W({card:p(t,_,z),container:k})}))})).catch((function(t){console.log(t)})),g.forEach((function(t){h({objectToSet:t,handler:r,event:"click"})})),h({objectToSet:S,handler:function(e){e.preventDefault();var o,n=e.target.querySelector(".form__save-button"),r=n.textContent;F({isLoading:!0,button:n}),(o={name:A.value,link:U.value},fetch("".concat(t,"/cards"),{method:"POST",headers:i,body:JSON.stringify(o)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))).then((function(t){W({card:p(t,_),container:k})})).catch(V).finally((function(){a(q),F({isLoading:!1,button:n,initialButtonText:r})}))},event:"submit"}),h({objectToSet:R,handler:function(e){e.preventDefault();var o,n=e.target.querySelector(".form__save-button"),r=n.textContent;F({isLoading:!0,button:n}),(o={name:D.value,about:O.value},fetch("".concat(t,"/users/me"),{method:"PATCH",headers:i,body:JSON.stringify(o)}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))).then((function(t){E.textContent=t.name,L.textContent=t.about})).catch(V).finally((function(){a(x),F({isLoading:!1,button:n,initialButtonText:r})}))},event:"submit"}),h({objectToSet:I,handler:function(e){e.preventDefault();var o,n=e.target.querySelector(".form__save-button"),r=n.textContent;(o=N.value,fetch("".concat(t,"/users/me/avatar"),{method:"PATCH",headers:i,body:JSON.stringify({avatar:o})}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))).then((function(t){J.src=t.avatar})).catch(V).finally((function(){a(T),F({isLoading:!1,button:n,initialButtonText:r})}))},event:"submit"}),h({objectToSet:w,handler:function(){var e;(e=b.querySelector(".photos__photo")._id,fetch("".concat(t,"/cards/").concat(e),{method:"DELETE",headers:i}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))).then((function(){b.remove(),b=void 0})).catch(V).finally((function(){a(B)}))},event:"submit"}),h({objectToSet:C,handler:function(){S.reset(),v({element:S,buttonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive"}),c(q)},event:"click"}),h({objectToSet:j,handler:function(){D.value=E.textContent,O.value=L.textContent,v({element:R,buttonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive"}),c(x)},event:"click"}),h({objectToSet:P,handler:function(){I.reset(),v({element:I,buttonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive"}),c(T)},event:"click"}),y={formSelector:".form",fieldsetSelector:".form__set",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive",inputErrorClass:"form__input_type_error",activeInputErrorClass:"form__input-error_active"},Array.from(document.querySelectorAll(y.formSelector)).forEach((function(t){t.addEventListener("submit",(function(t){t.preventDefault()})),Array.from(t.querySelectorAll(y.fieldsetSelector)).forEach((function(t){!function(t,e){var o=Array.from(t.querySelectorAll(e.inputSelector)),n=t.querySelector(e.submitButtonSelector);f({inputList:o,buttonElement:n,validationParams:e}),o.forEach((function(r){r.addEventListener("input",(function(){(function(t){var e,o,n,r,c;t.inputElement.validity.valid?(o=(e=t).formElement,n=e.inputElement,r=e.validationParams,c=o.querySelector(".".concat(n.id,"-error")),n.classList.remove(r.inputErrorClass),c.classList.remove(r.activeInputErrorClass),c.textContent=""):(t.inputElement.validity.patternMismatch?t.inputElement.setCustomValidity(t.inputElement.dataset.errorMessage):t.inputElement.setCustomValidity(""),function(t){var e=t.formElement,o=t.inputElement,n=t.validationParams,r=e.querySelector(".".concat(o.id,"-error"));o.classList.add(n.inputErrorClass),r.textContent=o.validationMessage,r.classList.add(n.activeInputErrorClass)}(t))})({formElement:t,inputElement:r,validationParams:e}),f({inputList:o,buttonElement:n,validationParams:e})}))}))}(t,y)}))}))})()})();